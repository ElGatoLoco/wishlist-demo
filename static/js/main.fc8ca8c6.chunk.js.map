{"version":3,"sources":["features/products/redux/types.ts","features/products/redux/actions.ts","shared/utils/format-danish-crowns.ts","features/products/components/Popup.tsx","environment.ts","shared/hooks/useStopTouchPropagation.ts","features/wishlist/redux/types.ts","features/products/components/Product.tsx","features/wishlist/redux/actions.ts","screens/product-list/ProductList.tsx","shared/utils/is-mobile.ts","App.tsx","reportWebVitals.ts","features/products/redux/reducer.ts","features/products/redux/requests.ts","features/products/redux/sagas.ts","features/wishlist/redux/reducer.ts","shared/utils/combine-watchers.ts","store.ts","index.tsx"],"names":["GET_PRODUCTS","GET_PRODUCTS_SUCCESS","GET_PRODUCTS_ERROR","getProductsSuccess","products","type","payload","formatDanishCrowns","val","replace","getStockIcon","stockStatus","Popup","isShown","hide","shops","className","onClick","src","alt","map","shop","logo","name","stock","price","href","url","target","rel","environment","process","addStopTouchPropagationListeners","ref","forEach","evt","current","addEventListener","e","stopPropagation","passive","removeStopTouchPropagationListeners","removeEventListener","ADD_TO_WISHLIST","REMOVE_FROM_WISHLIST","CLEAR_WISHLIST","Product","refs","id","title","colors","description","imageUrl","logoUrl","advertisments","similarProducts","onButtonClick","dispatch","useDispatch","productDataRef","useRef","advertismentsRef","wishesRef","useEffect","useState","productDataDivHeight","setProductDataDivHeight","imageHeight","useMemo","useLayoutEffect","clientHeight","lowestPrice","reduce","acc","curr","Infinity","some","addProductToWishlists","useCallback","style","height","backgroundImage","length","advrt","product","ProductList","useSelector","state","productsReducer","swipedisabled","setSwipeDisabled","activeProductId","setActiveProductId","hidePopup","onProductButtonClick","productId","window","open","overflow","disabled","find","isMobile","test","navigator","userAgent","vendor","substr","App","reportWebVitals","onPerfEntry","Function","then","getCLS","getFID","getFCP","getLCP","getTTFB","initialState","errors","getProductsRequest","axios","get","res","data","getProductsSaga","getProductsWatcher","call","put","error","takeLatest","items","combineWatchers","args","flat","watcher","Error","stack","rootSaga","rootReducer","combineReducers","action","wishlistReducer","console","log","filter","item","all","sagaMiddleware","createSagaMiddleware","store","createStore","applyMiddleware","run","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.fc8ca8c6.chunk.js","sourcesContent":["import { Reducer } from 'redux';\n\nimport { ProductT, ReduxAction } from '../../../shared/types';\n\nexport const GET_PRODUCTS = 'GET_PRODUCTS';\nexport const GET_PRODUCTS_SUCCESS = 'GET_PRODUCTS_SUCCESS';\nexport const GET_PRODUCTS_ERROR = 'GET_PRODUCTS_ERROR';\n\nexport type GetProducts = ReduxAction<typeof GET_PRODUCTS>;\nexport type GetProductsSuccess = ReduxAction<typeof GET_PRODUCTS_SUCCESS, ProductT[]>;\nexport type GetProductsError = ReduxAction<typeof GET_PRODUCTS_ERROR, Error>;\n\nexport type ProductsState = {\n  products: ProductT[];\n  errors: Error[];\n};\n\nexport type ProductsAction = GetProducts | GetProductsSuccess | GetProductsError;\nexport type ProductsReducer = Reducer<ProductsState, ProductsAction>;\n","import { ProductT } from '../../../shared/types';\nimport {\n  GET_PRODUCTS,\n  GET_PRODUCTS_ERROR,\n  GET_PRODUCTS_SUCCESS,\n  GetProducts,\n  GetProductsError,\n  GetProductsSuccess,\n} from './types';\n\nexport const getProducts = (): GetProducts => ({\n  type: GET_PRODUCTS,\n  payload: null,\n});\n\nexport const getProductsSuccess = (products: ProductT[]): GetProductsSuccess => ({\n  type: GET_PRODUCTS_SUCCESS,\n  payload: products,\n});\n\nexport const getProductsError = (error: Error): GetProductsError => ({\n  type: GET_PRODUCTS_ERROR,\n  payload: error,\n});\n","type FormatDanishCrowns = (val: number) => string;\nexport const formatDanishCrowns: FormatDanishCrowns = (val) => {\n  if (val % 1 === 0) {\n    return `${val},- DKK`;\n  }\n\n  return `${val} DKK`.replace('.', ',');\n};\n","import './Popup.css';\n\nimport { FC } from 'react';\n\nimport { ShopT, StockT } from '../../../shared/types';\nimport { formatDanishCrowns } from '../../../shared/utils/format-danish-crowns';\n\nconst getStockIcon = (stockStatus: StockT) => {\n  switch (stockStatus) {\n    case 'In stock':\n      return '/svg/in-stock.svg';\n    case 'Out of stock':\n      return '/svg/no-stock.svg';\n    default:\n      return '/svg/stock-unknown.svg';\n  }\n};\n\ntype PopupT = FC<{\n  isShown: boolean;\n  hide: () => void;\n  shops: ShopT[];\n}>;\nexport const Popup: PopupT = ({ isShown, hide, shops }) => {\n  return (\n    <>\n      <div className={`overlay ${isShown ? 'show' : ''}`} onClick={hide} />\n      <div className={`modal ${isShown ? 'show' : ''}`}>\n        <img onClick={hide} className=\"close\" src=\"/svg/close.svg\" alt=\"Close popup\" />\n        <h3>Shops</h3>\n        <hr />\n        {shops.map((shop) => {\n          return (\n            <div key={shop.name}>\n              <div className=\"shop\">\n                <div className=\"shop-name\">\n                  {shop.logo ? <img className=\"shop-logo\" src={shop.logo} alt={shop.name} /> : shop.name}\n                </div>\n                <div className=\"stock-status\">\n                  <img src={getStockIcon(shop.stock)} alt={shop.stock} />\n                  {shop.stock}\n                </div>\n                <div className=\"shop-price\">{formatDanishCrowns(shop.price)}</div>\n                <a className=\"shop-link\" href={'https://' + shop.url} target=\"_blank\" rel=\"noreferrer\">\n                  <img src=\"/svg/navigation-open.svg\" alt={`open on ${shop.name}`} />\n                </a>\n              </div>\n\n              <hr />\n            </div>\n          );\n        })}\n      </div>\n    </>\n  );\n};\n","type Environment = {\n  apiUrl: string;\n  staticUrl: string;\n};\n\nexport const environment: Environment = {\n  apiUrl: process.env.REACT_APP_API_URL as string,\n  staticUrl: process.env.REACT_APP_STATIC_URL as string,\n};\n","import { useEffect } from 'react';\n\nconst addStopTouchPropagationListeners = (ref: React.MutableRefObject<Element | null>) => {\n  ['touchstart', 'touchmove', 'touchend'].forEach((evt) => {\n    ref.current?.addEventListener(evt, (e) => e.stopPropagation(), {\n      passive: true,\n    });\n  });\n};\n\nconst removeStopTouchPropagationListeners = (ref: React.MutableRefObject<Element | null>) => {\n  ['touchstart', 'touchmove', 'touchend'].forEach((evt) => {\n    ref.current?.removeEventListener(evt, (e) => e.stopPropagation());\n  });\n};\n\ntype UseStopTouchPropagation = (refs: React.MutableRefObject<Element | null>[]) => void;\nexport const useStopTouchPropagation: UseStopTouchPropagation = (refs) => {\n  useEffect(() => {\n    refs.forEach(addStopTouchPropagationListeners);\n\n    return () => {\n      refs.forEach(removeStopTouchPropagationListeners);\n    };\n  }, [refs]);\n};\n","import { Reducer } from 'redux';\n\nimport { ReduxAction } from '../../../shared/types';\n\nexport const ADD_TO_WISHLIST = 'ADD_TO_WISHLIST';\nexport const REMOVE_FROM_WISHLIST = 'REMOVE_FROM_WISHLIST';\nexport const CLEAR_WISHLIST = 'CLEAR_WISHLIST';\n\nexport type AddToWishlist = ReduxAction<typeof ADD_TO_WISHLIST, number>;\nexport type RemoveFromWishlist = ReduxAction<typeof REMOVE_FROM_WISHLIST, number>;\nexport type ClearWishlist = ReduxAction<typeof CLEAR_WISHLIST>;\n\nexport type WishlistState = {\n  items: number[];\n};\n\nexport type WishlistAction = AddToWishlist | RemoveFromWishlist | ClearWishlist;\nexport type WishlistReducer = Reducer<WishlistState, WishlistAction>;\n","import './Product.css';\n\nimport { FC, useCallback, useLayoutEffect, useMemo, useRef, useState } from 'react';\nimport { useDispatch } from 'react-redux';\n\nimport { environment } from '../../../environment';\nimport { useStopTouchPropagation } from '../../../shared/hooks/useStopTouchPropagation';\nimport { ProductT } from '../../../shared/types';\nimport { formatDanishCrowns } from '../../../shared/utils/format-danish-crowns';\nimport { addToWishlist } from '../../wishlist/redux/actions';\n\ntype ProductProps = ProductT & {\n  onButtonClick: () => void;\n};\nexport const Product: FC<ProductProps> = ({\n  id,\n  title,\n  colors,\n  description,\n  imageUrl,\n  logoUrl,\n  shops,\n  advertisments,\n  similarProducts,\n  onButtonClick,\n}) => {\n  const dispatch = useDispatch();\n  const productDataRef = useRef<HTMLDivElement | null>(null);\n  const advertismentsRef = useRef<HTMLDivElement | null>(null);\n  const wishesRef = useRef<HTMLDivElement | null>(null);\n\n  useStopTouchPropagation([advertismentsRef, wishesRef]);\n\n  const [productDataDivHeight, setProductDataDivHeight] = useState(0);\n  const imageHeight = useMemo(() => {\n    // Occupy total height minus the button height and padding\n    return `calc(100vh - ${productDataDivHeight}px - 60px - 32px)`;\n  }, [productDataDivHeight]);\n  useLayoutEffect(() => {\n    setProductDataDivHeight(productDataRef.current?.clientHeight || 0);\n  }, []);\n\n  const lowestPrice = useMemo(() => {\n    return shops.reduce((acc, curr) => {\n      return curr.price < acc ? curr.price : acc;\n    }, Infinity);\n  }, [shops]);\n\n  const stockStatus = useMemo(() => {\n    if (shops.some((shop) => shop.stock === 'In stock')) {\n      return 'In stock';\n    }\n    if (shops.some((shop) => shop.stock === 'Stock unknown')) {\n      return 'Stock unknown';\n    }\n\n    return 'Out of stock';\n  }, [shops]);\n\n  const addProductToWishlists = useCallback(() => {\n    dispatch(addToWishlist(id));\n  }, [dispatch, id]);\n\n  return (\n    <>\n      <div className=\"wrapper\">\n        <div\n          className=\"product-image-container\"\n          style={{\n            height: imageHeight,\n            backgroundImage: `${environment.staticUrl}${imageUrl}`,\n          }}\n        >\n          <button className=\"back-button\" />\n          <img\n            className=\"product-image\"\n            src={`${environment.staticUrl}${imageUrl}`}\n            alt={title}\n            style={{ height: imageHeight }}\n          />\n          {logoUrl && <img className=\"product-logo\" src={logoUrl} alt={title} />}\n          <button className=\"add-to-wishlist\" onClick={addProductToWishlists}>\n            Add to wishlist\n          </button>\n        </div>\n        <div className=\"content\">\n          <div className=\"parallax\">\n            <div ref={productDataRef} className=\"product-data\">\n              <div className=\"product-details\">\n                <div className=\"product-info\">\n                  <h3>{title}</h3>\n                  <h4>{colors}</h4>\n                </div>\n                <p className=\"availability\">{stockStatus}</p>\n              </div>\n              <div className=\"price\">\n                {shops.length > 1 && 'from '}\n                <b>{formatDanishCrowns(lowestPrice)}</b>\n              </div>\n            </div>\n            <p className=\"product-text\">{description}</p>\n          </div>\n\n          <div className=\"fixed\">\n            <button onClick={onButtonClick}>\n              {shops.length > 1 ? `Available in ${shops.length} shops` : `Buy now on ${shops[0].url}`}\n            </button>\n          </div>\n          <div className=\"product-related\">\n            <hr />\n            <div className=\"advertisments\" ref={advertismentsRef}>\n              {advertisments.map((advrt) => (\n                <div className=\"advertisment\">\n                  <img src={`${environment.staticUrl}${advrt}`} alt={advrt} />\n                </div>\n              ))}\n            </div>\n            <hr />\n            <p>Similar to your wishes</p>\n            <div className=\"similar-wishes\" ref={wishesRef}>\n              {similarProducts.map((product) => (\n                <div key={product.id} className=\"wish\">\n                  <img className=\"wish-img\" src={`${environment.staticUrl}${product.imageUrl}`} alt={product.title} />\n                  <p className=\"wish-title\">{product.title}</p>\n                  <p className=\"wish-price\">{formatDanishCrowns(product.price)}</p>\n                </div>\n              ))}\n            </div>\n          </div>\n        </div>\n      </div>\n    </>\n  );\n};\n","import {\n  ADD_TO_WISHLIST,\n  AddToWishlist,\n  CLEAR_WISHLIST,\n  ClearWishlist,\n  REMOVE_FROM_WISHLIST,\n  RemoveFromWishlist,\n} from './types';\n\nexport const addToWishlist = (productId: number): AddToWishlist => ({\n  type: ADD_TO_WISHLIST,\n  payload: productId,\n});\n\nexport const removeFromWishlist = (productId: number): RemoveFromWishlist => ({\n  type: REMOVE_FROM_WISHLIST,\n  payload: productId,\n});\n\nexport const clearWishlist = (): ClearWishlist => ({\n  type: CLEAR_WISHLIST,\n  payload: null,\n});\n","import { FC, useCallback, useState } from 'react';\nimport { useSelector } from 'react-redux';\nimport SwipeableViews from 'react-swipeable-views';\n\nimport { Popup } from '../../features/products/components/Popup';\nimport { Product } from '../../features/products/components/Product';\nimport { ProductsState } from '../../features/products/redux/types';\nimport { RootState } from '../../store';\n\nexport const ProductList: FC = () => {\n  const { products } = useSelector<RootState, ProductsState>((state) => state.productsReducer);\n  const [swipedisabled, setSwipeDisabled] = useState(false);\n  const [activeProductId, setActiveProductId] = useState(-1);\n\n  const showPopup = (productId: number) => {\n    setActiveProductId(productId);\n    setSwipeDisabled(true);\n  };\n  const hidePopup = useCallback(() => {\n    setActiveProductId(-1);\n    setSwipeDisabled(false);\n  }, []);\n\n  const onProductButtonClick = useCallback((product) => {\n    return product.shops.length > 1\n      ? () => showPopup(product.id)\n      : () => window.open('https://' + product.shops[0].url, '_blank');\n  }, []);\n\n  return (\n    <>\n      <SwipeableViews style={{ overflow: 'hidden' }} disabled={swipedisabled}>\n        {products.map((product) => (\n          <Product key={product.id} {...product} onButtonClick={onProductButtonClick(product)} />\n        ))}\n      </SwipeableViews>\n      <Popup\n        isShown={activeProductId > -1}\n        hide={hidePopup}\n        shops={products.find(({ id }) => id === activeProductId)?.shops || []}\n      />\n    </>\n  );\n};\n","export const isMobile =\n  /(android|bb\\d+|meego).+mobile|avantgo|bada\\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(\n    navigator.userAgent || navigator.vendor,\n  ) ||\n  /1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw-(n|u)|c55\\/|capi|ccwa|cdm-|cell|chtm|cldc|cmd-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc-s|devi|dica|dmob|do(c|p)o|ds(12|-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(-|_)|g1 u|g560|gene|gf-5|g-mo|go(\\.w|od)|gr(ad|un)|haie|hcit|hd-(m|p|t)|hei-|hi(pt|ta)|hp( i|ip)|hs-c|ht(c(-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i-(20|go|ma)|i230|iac( |-|\\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\\/)|klon|kpt |kwc-|kyo(c|k)|le(no|xi)|lg( g|\\/(k|l|u)|50|54|-[a-w])|libw|lynx|m1-w|m3ga|m50\\/|ma(te|ui|xo)|mc(01|21|ca)|m-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|-([1-8]|c))|phil|pire|pl(ay|uc)|pn-2|po(ck|rt|se)|prox|psio|pt-g|qa-a|qc(07|12|21|32|60|-[2-7]|i-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h-|oo|p-)|sdk\\/|se(c(-|0|1)|47|mc|nd|ri)|sgh-|shar|sie(-|m)|sk-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h-|v-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl-|tdg-|tel(i|m)|tim-|t-mo|to(pl|sh)|ts(70|m-|m3|m5)|tx-9|up(\\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas-|your|zeto|zte-/i.test(\n    (navigator.userAgent || navigator.vendor).substr(0, 4),\n  );\n","import './App.css';\n\nimport { FC, useEffect } from 'react';\nimport { useDispatch } from 'react-redux';\n\nimport { getProducts } from './features/products/redux/actions';\nimport { ProductList } from './screens/product-list/ProductList';\nimport { isMobile } from './shared/utils/is-mobile';\n\nexport const App: FC = () => {\n  const dispatch = useDispatch();\n  useEffect(() => {\n    dispatch(getProducts());\n  }, [dispatch]);\n\n  if (!isMobile) {\n    return (\n      <div className=\"unavailable\">\n        <h1>App is currently only available on mobile.</h1>\n      </div>\n    );\n  }\n\n  return <ProductList />;\n};\n","import { ReportHandler } from 'web-vitals';\n\nconst reportWebVitals = (onPerfEntry?: ReportHandler) => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import { GET_PRODUCTS_ERROR, GET_PRODUCTS_SUCCESS, ProductsReducer, ProductsState } from './types';\n\nconst initialState: ProductsState = {\n  products: [],\n  errors: [],\n};\nexport const productsReducer: ProductsReducer = (state = initialState, action) => {\n  switch (action.type) {\n    case GET_PRODUCTS_SUCCESS:\n      return { ...state, products: action.payload, errors: [] };\n    case GET_PRODUCTS_ERROR:\n      return { ...state, errors: [...state.errors, action.payload] };\n    default:\n      return state;\n  }\n};\n","import axios from 'axios';\n\nimport { environment } from '../../../environment';\nimport { ProductT } from '../../../shared/types';\n\ntype GetProductsRequest = () => Promise<ProductT[] | Error>;\nexport const getProductsRequest: GetProductsRequest = () => {\n  return axios.get(`${environment.apiUrl}/products.json`).then((res) => res.data);\n};\n","import { SagaIterator } from 'redux-saga';\nimport { StrictEffect, call, put, takeLatest } from 'redux-saga/effects';\n\nimport { ProductT } from '../../../shared/types';\nimport { getProductsError, getProductsSuccess } from './actions';\nimport { getProductsRequest } from './requests';\nimport { GET_PRODUCTS } from './types';\n\nexport function* getProductsSaga(): SagaIterator {\n  try {\n    const products: ProductT[] = yield call(getProductsRequest);\n    yield put(getProductsSuccess(products));\n  } catch (e) {\n    yield put(getProductsError(e));\n  }\n}\n\nexport function* getProductsWatcher(): Generator<StrictEffect> {\n  yield takeLatest(GET_PRODUCTS, getProductsSaga);\n}\n","import { ADD_TO_WISHLIST, CLEAR_WISHLIST, REMOVE_FROM_WISHLIST, WishlistReducer, WishlistState } from './types';\n\nconst initialState: WishlistState = {\n  items: [],\n};\nexport const wishlistReducer: WishlistReducer = (state = initialState, action) => {\n  switch (action.type) {\n    case ADD_TO_WISHLIST:\n      console.log(`Adding to wishlist product with id ${action.payload}`);\n\n      return { ...state, items: [...state.items, action.payload] };\n    case REMOVE_FROM_WISHLIST:\n      return { ...state, items: state.items.filter((item) => item !== action.payload) };\n    case CLEAR_WISHLIST:\n      return { ...state, items: [] };\n    default:\n      return state;\n  }\n};\n","import { StrictEffect } from 'redux-saga/effects';\n\nexport type Watcher = () => Generator<StrictEffect>;\n\nexport const combineWatchers = (...args: (Watcher | Watcher[])[]): Generator[] => {\n  return args.flat().map((watcher: Watcher) => {\n    try {\n      return watcher();\n    } catch (e) {\n      const error = new Error('It seems that a watcher is not a function.');\n      error.stack = e.stack;\n\n      throw error;\n    }\n  });\n};\n","import { applyMiddleware, combineReducers, createStore } from 'redux';\nimport createSagaMiddleware from 'redux-saga';\nimport { all } from 'redux-saga/effects';\n\nimport { productsReducer } from './features/products/redux/reducer';\nimport { getProductsWatcher } from './features/products/redux/sagas';\nimport { wishlistReducer } from './features/wishlist/redux/reducer';\nimport { combineWatchers } from './shared/utils/combine-watchers';\n\nexport const rootReducer = combineReducers({\n  productsReducer,\n  wishlistReducer,\n});\n\nfunction* rootSaga() {\n  yield all(combineWatchers(getProductsWatcher));\n}\nconst sagaMiddleware = createSagaMiddleware();\n\nexport type RootState = ReturnType<typeof rootReducer>;\nexport const store = createStore(rootReducer, applyMiddleware(sagaMiddleware));\n\nsagaMiddleware.run(rootSaga);\n","import './index.css';\n\nimport React from 'react';\nimport ReactDOM from 'react-dom';\nimport { Provider } from 'react-redux';\n\nimport { App } from './App';\nimport reportWebVitals from './reportWebVitals';\nimport { store } from './store';\n\nReactDOM.render(\n  <React.StrictMode>\n    <Provider store={store}>\n      <App />\n    </Provider>\n  </React.StrictMode>,\n  document.getElementById('root'),\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}